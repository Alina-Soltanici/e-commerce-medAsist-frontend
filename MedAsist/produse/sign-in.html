<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedAsist | Înregistrare</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background-color: #f1f5f9;
        }

        h2 {
            font-family: 'Sora', sans-serif;
        }

        .password-toggle {
            cursor: pointer;
        }
        
        #password-criteria-list li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease-in-out;
        }
        
        .criterion .icon {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            text-align: center;
            line-height: 1rem;
        }
        
        .criterion.valid { color: #16a34a; }
        .criterion.valid .fa-circle-xmark { display: none; }
        .criterion.valid .fa-circle-check { display: inline-block; }

        .criterion.invalid { color: #dc2626; }
        .criterion.invalid .fa-circle-check { display: none; }
        .criterion.invalid .fa-circle-xmark { display: inline-block; }

        .custom-checkbox input { display: none; }
        .custom-checkbox .checkbox-box {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid #cbd5e1;
            border-radius: 0.375rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
            flex-shrink: 0;
        }
        .custom-checkbox .checkmark {
            color: white;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.2s ease-in-out;
        }
        .custom-checkbox input:checked + .checkbox-box {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }
        .custom-checkbox input:checked + .checkbox-box .checkmark {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>

<body>
     <header class="fixed top-0 left-0 right-0 z-[100] p-4">
        <nav id="navbar-container" class="max-w-7xl mx-auto bg-white/70 backdrop-blur-lg rounded-full shadow-sm transition-all duration-300">
            <div class="flex justify-between items-center px-6 py-3">
                <a href="index.html"><img src="img/medasist.svg" alt="MedAsist Logo" class="h-8 w-auto"></a>
                <div class="hidden lg:flex items-center gap-10 text-gray-700 font-medium">
                    <a href="produse/produse.html" class="nav-link hover:text-blue-600">Produse</a>
                    <a href="#contact" class="nav-link hover:text-blue-600">Contact</a>
                </div>
                <div class="hidden lg:flex items-center gap-4">
                    <div id="language-switcher" class="relative">
                        <button id="language-switcher-button" class="flex items-center gap-2 font-medium text-gray-600 hover:text-blue-600 transition-colors px-4 py-2">
                            <i class="fa-solid fa-globe"></i>
                            <span>RO</span>
                            <i class="fa-solid fa-chevron-down text-xs transition-transform duration-300"></i>
                        </button>
                        <div id="language-switcher-panel" class="absolute top-full right-0 mt-2 w-40 bg-white rounded-lg shadow-xl p-2 z-[101] opacity-0 pointer-events-none transform translate-y-2 transition-all duration-300">
                            <a href="#" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100">Română (RO)</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100">Русский (RU)</a>
                        </div>
                    </div>
                    <div class="h-6 border-l border-gray-200"></div>
                     <a href="#" class="font-medium text-gray-600 hover:text-blue-600 transition-colors px-4 py-2 rounded-full hover:bg-gray-100">Autentificare</a>
                     <a href="#" class="bg-blue-600 text-white font-semibold px-5 py-2 rounded-full hover:bg-blue-700 transition-colors">Înregistrare</a>
                     <div class="flex items-center gap-5 text-xl pl-4 border-l border-gray-200 ml-2">
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-600" title="Favorite"><i class="fa-solid fa-heart"></i></a>
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-600" title="Coș de cumpărături"><i class="fa-solid fa-cart-shopping"></i></a>
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-600" title="Contul meu"><i class="fa-solid fa-user"></i></a>
                    </div>
                </div>
                <div class="lg:hidden">
                    <button id="hamburger-button" class="text-2xl text-gray-800"><i class="fa-solid fa-bars"></i></button>
                </div>
            </div>
        </nav>
    </header>

    <main class="relative min-h-screen w-full flex items-center justify-center lg:justify-end py-24">
        <div class="absolute inset-0 z-10 bg-gray-300 hidden lg:block" style="clip-path: polygon(43% 0, 40% 0, 52% 100%, 55% 100%);"></div>
        <div class="absolute inset-0 z-40 bg-blue-700 hidden lg:block" style="clip-path: polygon(38% 0, 35% 0, 48% 100%, 51% 100%);"></div>
        <div class="absolute inset-0 z-9 bg-blue-500 hidden lg:block" style="clip-path: polygon(42% 0, 38% 0, 50% 100%, 52% 100%);"></div>
        <div class="absolute inset-0 z-30 bg-blue-500 hidden lg:block" style="clip-path: polygon(0 0, 35% 0, 49% 100%, 0% 100%);"></div>

        <div class="relative z-50 lg:mr-[10%] w-full max-w-lg mx-auto px-6 lg:px-0">
            <h2 class="text-3xl font-bold text-gray-900 mb-8">Creează Cont</h2>
            <form id="registration-form" class="space-y-4">
                <div class="relative"><i class="fa-solid fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i><input id="full-name" type="text" placeholder="Nume complet" required class="w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-blue-500"></div>
                <div class="relative"><i class="fa-solid fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i><input id="email" type="email" placeholder="Adresa de Email" required class="w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-blue-500"></div>
                
                <div>
                    <div class="relative">
                        <i class="fa-solid fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input id="signup-password" type="password" placeholder="Parola" required class="w-full pl-12 pr-10 py-3 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-blue-500">
                        <i class="fa-solid fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 password-toggle" data-target="signup-password"></i>
                    </div>
                    <div id="password-criteria" class="hidden text-xs text-gray-500 pl-1 pt-2">
                         <ul id="password-criteria-list" class="space-y-1.5">
                            <li id="length-criterion" class="criterion"><i class="icon fa-regular fa-circle-xmark"></i><i class="icon fa-regular fa-circle-check"></i>Cel puțin 8 caractere</li>
                            <li id="upper-criterion" class="criterion"><i class="icon fa-regular fa-circle-xmark"></i><i class="icon fa-regular fa-circle-check"></i>O literă mare (A-Z)</li>
                            <li id="number-criterion" class="criterion"><i class="icon fa-regular fa-circle-xmark"></i><i class="icon fa-regular fa-circle-check"></i>O cifră (0-9)</li>
                            <li id="special-criterion" class="criterion"><i class="icon fa-regular fa-circle-xmark"></i><i class="icon fa-regular fa-circle-check"></i>Un caracter special (!@#$)</li>
                        </ul>
                    </div>
                </div>

                <div>
                    <div class="relative">
                        <i class="fa-solid fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input id="confirm-password" type="password" placeholder="Confirmă Parola" required class="w-full pl-12 pr-10 py-3 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-blue-500">
                        <i class="fa-solid fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 password-toggle" data-target="confirm-password"></i>
                    </div>
                    <div id="password-match-status" class="hidden text-xs pl-1 pt-2"></div>
                </div>

                <div class="space-y-4 pt-3">
                    <label for="terms-checkbox" class="custom-checkbox flex items-center cursor-pointer">
                        <input id="terms-checkbox" type="checkbox">
                        <span class="checkbox-box"><i class="fa-solid fa-check checkmark text-xs"></i></span>
                        <span class="ml-3 text-base text-gray-600">Sunt de acord cu <a href="#" class="font-medium text-blue-500 hover:underline">Termenii și Condițiile</a>.</span>
                    </label>
                    <label for="privacy-checkbox" class="custom-checkbox flex items-center cursor-pointer">
                        <input id="privacy-checkbox" type="checkbox">
                         <span class="checkbox-box"><i class="fa-solid fa-check checkmark text-xs"></i></span>
                        <span class="ml-3 text-base text-gray-600">Am citit și sunt de acord cu <a href="#" class="font-medium text-blue-500 hover:underline">Politica de Confidențialitate</a>.</span>
                    </label>
                </div>

                <div id="form-notice" class="text-xs text-red-500 text-center h-4 pt-1"></div>

                <button id="submit-button" type="submit" disabled 
                    class="w-full py-3 px-4 rounded-lg text-white bg-blue-500 hover:bg-blue-600 font-semibold disabled:bg-blue-300 disabled:text-white disabled:cursor-not-allowed transition-colors">
                    <span id="submit-text">Creează Cont</span>
                    <i id="submit-loading" class="fa-solid fa-spinner fa-spin hidden ml-2"></i>
                </button>
            </form>

           <p class="mt-8 text-center text-sm text-gray-600">
    Ai deja un cont? 
    <a href="signup.html" class="font-medium text-blue-500 hover:underline">Autentifică-te</a>
</p>
        </div>
    </main>

     <footer class="bg-gray-900 text-gray-300">
        <div class="container mx-auto px-12 sm:px-16 py-16">
            <div class="grid md:grid-cols-4 gap-12 text-center md:text-left">
                <div>
                    <img src="img/medasist.svg" alt="MedAsist Logo" class="h-9 w-auto mb-4 mx-auto md:mx-0 invert brightness-0">
                    <p class="text-sm">Partenerul dumneavoastră de încredere pentru echipamente medicale profesionale.</p>
                </div>
                <div>
                    <h4 class="font-bold text-white text-lg mb-4">Linkuri Utile</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-blue-400 transition-colors">Acasă</a></li>
                        <li><a href="#categorii" class="hover:text-blue-400 transition-colors">Produse</a></li>
                        <li><a href="#" class="hover:text-blue-400 transition-colors">Termeni și Condiții</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-white text-lg mb-4">Contact</h4>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center justify-center md:justify-start gap-2"><i class="fa-solid fa-phone w-4"></i> +373 22 123 456</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-white text-lg mb-4">Urmărește-ne</h4>
                    <div class="flex justify-center md:justify-start gap-5 text-2xl">
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-400"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-400"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="icon-hover-effect text-gray-400 hover:text-blue-400"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-8 text-center text-sm text-gray-500">
                <p>&copy; 2025 MedAsist. Toate drepturile rezervate.</p>
                <p class="mt-2 text-sm text-gray-600">Front-End realizat de <a href="https://webglow-studio.netlify.app" target="_blank" rel="noopener noreferrer" class="font-semibold text-gray-500 hover:text-blue-400">WebGlow</a></p>
                </div>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const signupPassword = document.getElementById('signup-password');
            const confirmPassword = document.getElementById('confirm-password');
            const passwordCriteria = document.getElementById('password-criteria');
            const lengthCriterion = document.getElementById('length-criterion');
            const upperCriterion = document.getElementById('upper-criterion');
            const numberCriterion = document.getElementById('number-criterion');
            const specialCriterion = document.getElementById('special-criterion');
            const passwordMatchStatus = document.getElementById('password-match-status');
            const termsCheckbox = document.getElementById('terms-checkbox');
            const privacyCheckbox = document.getElementById('privacy-checkbox');
            const submitButton = document.getElementById('submit-button');
            const passwordToggles = document.querySelectorAll('.password-toggle');
            const formNotice = document.getElementById('form-notice');
            const registrationForm = document.getElementById('registration-form');
            const submitText = document.getElementById('submit-text');
            const submitLoading = document.getElementById('submit-loading');

            passwordToggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const targetInput = document.getElementById(toggle.dataset.target);
                    if (targetInput.type === 'password') {
                        targetInput.type = 'text';
                        toggle.classList.replace('fa-eye', 'fa-eye-slash');
                    } else {
                        targetInput.type = 'password';
                        toggle.classList.replace('fa-eye-slash', 'fa-eye');
                    }
                });
            });

            const criteria = {
                length: { el: lengthCriterion, valid: false },
                upper: { el: upperCriterion, valid: false },
                number: { el: numberCriterion, valid: false },
                special: { el: specialCriterion, valid: false }
            };

            function updateCriterionUI(criterion, isValid) {
                criteria[criterion].valid = isValid;
                const element = criteria[criterion].el;
                if (isValid) {
                    element.classList.add('valid');
                    element.classList.remove('invalid');
                } else {
                    element.classList.add('invalid');
                    element.classList.remove('valid');
                }
            }

            function validatePassword() {
                const pass = signupPassword.value;
                if (pass.length > 0) {
                    passwordCriteria.classList.remove('hidden');
                } else {
                    passwordCriteria.classList.add('hidden');
                }
                
                updateCriterionUI('length', pass.length >= 8);
                updateCriterionUI('upper', /[A-Z]/.test(pass));
                updateCriterionUI('number', /[0-9]/.test(pass));
                updateCriterionUI('special', /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(pass));

                checkPasswordsMatch();
                checkFormValidity();
            }

            function checkPasswordsMatch() {
                const pass1 = signupPassword.value;
                const pass2 = confirmPassword.value;

                if (pass2.length > 0) {
                    passwordMatchStatus.classList.remove('hidden');
                    if (pass1 === pass2) {
                        passwordMatchStatus.innerHTML = `<span class="criterion valid flex items-center gap-2"><i class="fa-regular fa-circle-check"></i>Parolele se potrivesc</span>`;
                    } else {
                        passwordMatchStatus.innerHTML = `<span class="criterion invalid flex items-center gap-2"><i class="fa-regular fa-circle-xmark"></i>Parolele nu se potrivesc</span>`;
                    }
                } else {
                    passwordMatchStatus.classList.add('hidden');
                }
                checkFormValidity();
            }

            function checkFormValidity() {
                const allCriteriaMet = Object.values(criteria).every(c => c.valid);
                const passwordsMatch = signupPassword.value === confirmPassword.value && confirmPassword.value.length > 0;
                const termsAccepted = termsCheckbox.checked && privacyCheckbox.checked;
                
                const isFormValid = allCriteriaMet && passwordsMatch && termsAccepted;
                submitButton.disabled = !isFormValid;

                if (isFormValid) {
                    formNotice.textContent = '';
                } else {
                    formNotice.textContent = 'Completați toate câmpurile și acceptați termenii pentru a continua.';
                }
            }

            // Backend submission functionality
            registrationForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Show loading state
                submitButton.disabled = true;
                submitText.textContent = 'Se procesează...';
                submitLoading.classList.remove('hidden');
                formNotice.textContent = '';
                formNotice.className = 'text-xs text-center h-4 pt-1';

                try {
                    const formData = {
                        fullName: document.getElementById('full-name').value,
                        email: document.getElementById('email').value,
                        password: signupPassword.value,
                        confirmPassword: confirmPassword.value,
                        termsAccepted: termsCheckbox.checked,
                        privacyAccepted: privacyCheckbox.checked
                    };

                    // Replace with your actual backend endpoint
                    const response = await fetch('http://localhost:8081/signup', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });

                    const result = await response.json();

                   if (response.ok) {
    // Success
    formNotice.className = 'text-xs text-green-600 text-center h-4 pt-1';
    formNotice.textContent = 'Contul a fost creat cu succes! Verificați emailul pentru confirmare.';
    
    // Redirect către pagina statică signup.html
    setTimeout(() => {
        window.location.href = 'signup.html'; 
    }, 2000);
} else {
                        // Server error
                        formNotice.className = 'text-xs text-red-500 text-center h-4 pt-1';
                        formNotice.textContent = result.message || 'A apărut o eroare. Încercați din nou.';
                    }
                } catch (error) {
                    console.error('Registration error:', error);
                    formNotice.className = 'text-xs text-red-500 text-center h-4 pt-1';
                    formNotice.textContent = 'Eroare de conectare. Verificați conexiunea și încercați din nou.';
                } finally {
                    // Reset button state
                    submitText.textContent = 'Creează Cont';
                    submitLoading.classList.add('hidden');
                    checkFormValidity(); // Re-enable button if form is still valid
                }
            });

            signupPassword.addEventListener('input', validatePassword);
            confirmPassword.addEventListener('input', checkPasswordsMatch);
            termsCheckbox.addEventListener('change', checkFormValidity);
            privacyCheckbox.addEventListener('change', checkFormValidity);
            
            checkFormValidity();
        });
    </script>
</body>

</html>